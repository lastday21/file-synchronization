# Сервис синхронизации файлов

Программа для автоматической синхронизации локальной папки с Яндекс.Диском:
отслеживает создание, обновление и удаление файлов в указанной директории и отражает эти изменения в облаке.

---

## Содержание

* [Описание](#описание)
* [Требования](#требования)
* [Установка](#установка)
* [Конфигурация](#конфигурация)
* [Структура проекта](#структура-проекта)
* [Запуск](#запуск)
* [Тестирование](#тестирование)

---

## Описание

Программа отслеживает локальную папку (`local_folder`) и синхронизирует её содержимое с облачной папкой на Яндекс.Диске (`cloud_folder`).

* **Двухсторонняя синхронизация**: учитываются новые, изменённые и удалённые файлы.
* **Гибкие настройки**: все параметры задаются в `config.ini` (шаблон — `config_template.ini`).
* **Логирование**: операции и ошибки записываются в файл лога.

---

## Требования

* Python ≥ 3.8
* pip

**Зависимости** (см. `requirements.txt`):

```text
requests
pytest
```

---

## Установка

1. Клонировать репозиторий:

   ```bash
   git clone git@github.com:USERNAME/REPO.git
   cd REPO
   ```
2. (Опционально) Создать и активировать виртуальное окружение:

   ```bash
   python -m venv venv
   source venv/bin/activate   # Linux/macOS
   venv\Scripts\activate    # Windows
   ```
3. Установить зависимости:

   ```bash
   pip install -r requirements.txt
   ```
4. (Рекомендуется) Установить пакет в editable-режиме, чтобы модули были доступны для импорта:

   ```bash
   pip install -e .
   ```

---

## Конфигурация

1. Скопировать шаблон конфига и переименовать:

   ```bash
   cp config_template.ini config.ini   # Linux/macOS
   copy config_template.ini config.ini # Windows
   ```
2. Открыть `config.ini` и заполнить параметры:

   ```ini
   [SETTINGS]
   local_folder = /path/to/local/folder   # абсолютный путь к синхронизируемой папке
   cloud_folder = backup                  # имя (или путь) папки на Яндекс.Диске
   token        = YOUR_OAUTH_TOKEN_HERE   # ваш OAuth-токен
   sync_period  = 60                      # интервал синхронизации в секундах
   log_path     = logs/sync.log           # путь к файлу лога
   ```
3. Убедиться, что каталоги `local_folder` и директория для логов существуют или будут созданы автоматически.

---

## Структура проекта

```text
├── config_template.ini    # Шаблон конфига
├── config.ini             # Локальный конфиг (игнорируется Git)
├── requirements.txt       # Список зависимостей
├── README.md
├── logger.py              # Настройка логгера
├── disc_API.py            # Класс Yandex_disc для работы с API
├── sync.py                # Логика синхронизации
├── main.py                # Точка входа приложения
├── tests
│   ├── __init__.py        # Для корректного импорта модулей
│   ├── test_disc_API.py   # Тесты клиента API
│   └── test_sync.py       # Тесты логики синхронизации
└── logs/                  # Папка с логами
```

---

## Запуск

* Запуск напрямую из корня (если не устанавливали пакет):

  ```bash
  python main.py
  ```
* Запуск через модуль (после `pip install -e .`):

  ```bash
  python -m file_synchronizer.main
  ```

При старте происходит полная синхронизация, затем каждые `sync_period` секунд осуществляется проверка изменений. Для остановки нажать `Ctrl+C`.

---

## Тестирование

1Запустите:

   ```bash
   pytest
   ```

Если тесты не находят модули, проверьте:

* Установлен ли пакет (`pip install -e .`).

---

